<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planejador de Aulas - Sistema Completo</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Estilos inline para garantir funcionamento inicial */
        .hidden {
            display: none !important;
        }
        
        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div id="telaLogin" class="login-container">
        <div class="login-box">
            <div style="text-align: center; margin-bottom: 30px;">
                <h1 style="color: #0047B6;">ğŸ”’ Planejador de Aulas</h1>
                <p>Sistema completo com suporte a mÃºltiplas escolas</p>
            </div>
            
            <!-- FormulÃ¡rio de Login -->
            <div id="loginForm">
                <h2 style="color: #0047B6; margin-bottom: 20px;">Acessar Sistema</h2>
                
                <div class="form-group">
                    <label>UsuÃ¡rio:</label>
                    <input type="text" id="loginUsuario" placeholder="Digite seu usuÃ¡rio">
                </div>
                
                <div class="form-group">
                    <label>Senha:</label>
                    <input type="password" id="loginSenha" placeholder="Digite sua senha">
                    <span class="password-toggle" onclick="togglePassword('loginSenha')">ğŸ‘ï¸</span>
                </div>
                
                <div style="margin: 15px 0;">
                    <label>
                        <input type="checkbox" id="lembrarUsuario"> Lembrar usuÃ¡rio
                    </label>
                </div>
                
                <button class="btn-login" onclick="fazerLogin()">Entrar</button>
                
                <div style="text-align: center; margin-top: 15px;">
                    <a href="#" onclick="mostrarRecuperacao()" style="color: #0047B6; text-decoration: none;">
                        Esqueci minha senha
                    </a>
                </div>
                
                <div style="margin-top: 20px; text-align: center;">
                    <p>NÃ£o tem conta? <a href="#" onclick="mostrarCadastro()" style="color: #0047B6; font-weight: bold;">Cadastre-se</a></p>
                </div>
            </div>
            
            <!-- FormulÃ¡rio de Cadastro -->
            <div id="cadastroForm" class="hidden">
                <h2 style="color: #0047B6; margin-bottom: 20px;">Criar Conta</h2>
                
                <div class="form-group">
                    <label>Nome completo:</label>
                    <input type="text" id="cadastroNome" placeholder="Seu nome completo">
                </div>
                
                <div class="form-group">
                    <label>UsuÃ¡rio:</label>
                    <input type="text" id="cadastroUsuario" placeholder="Escolha um usuÃ¡rio">
                </div>
                
                <div class="form-group">
                    <label>Email:</label>
                    <input type="email" id="cadastroEmail" placeholder="seu@email.com">
                </div>
                
                <div class="form-group">
                    <label>Senha:</label>
                    <input type="password" id="cadastroSenha" placeholder="MÃ­nimo 6 caracteres">
                    <span class="password-toggle" onclick="togglePassword('cadastroSenha')">ğŸ‘ï¸</span>
                </div>
                
                <div class="form-group">
                    <label>Confirmar senha:</label>
                    <input type="password" id="cadastroConfirmarSenha" placeholder="Digite novamente">
                    <span class="password-toggle" onclick="togglePassword('cadastroConfirmarSenha')">ğŸ‘ï¸</span>
                </div>
                
                <div style="margin: 15px 0;">
                    <label>
                        <input type="checkbox" id="termosUso"> Concordo com os termos
                    </label>
                </div>
                
                <button class="btn-login" onclick="fazerCadastro()">Criar Conta</button>
                
                <div style="margin-top: 20px; text-align: center;">
                    <p>JÃ¡ tem conta? <a href="#" onclick="mostrarLogin()" style="color: #0047B6; font-weight: bold;">FaÃ§a login</a></p>
                </div>
            </div>
            
            <!-- FormulÃ¡rio de RecuperaÃ§Ã£o -->
            <div id="recuperacaoForm" class="hidden">
                <h2 style="color: #0047B6; margin-bottom: 20px;">Recuperar Senha</h2>
                
                <div class="form-group">
                    <label>Email cadastrado:</label>
                    <input type="email" id="recuperacaoEmail" placeholder="Digite o email da sua conta">
                </div>
                
                <div class="form-group">
                    <label>UsuÃ¡rio:</label>
                    <input type="text" id="recuperacaoUsuario" placeholder="Digite seu usuÃ¡rio">
                </div>
                
                <button class="btn-login" onclick="iniciarRecuperacao()">Enviar Link de RecuperaÃ§Ã£o</button>
                
                <div style="margin-top: 20px; text-align: center;">
                    <p>Lembrou a senha? <a href="#" onclick="mostrarLogin()" style="color: #0047B6; font-weight: bold;">Fazer login</a></p>
                </div>
            </div>
            
            <!-- FormulÃ¡rio de Nova Senha -->
            <div id="novaSenhaForm" class="hidden">
                <h2 style="color: #0047B6; margin-bottom: 20px;">Nova Senha</h2>
                
                <div class="form-group">
                    <label>CÃ³digo de verificaÃ§Ã£o:</label>
                    <input type="text" id="codigoVerificacao" placeholder="CÃ³digo enviado por email">
                </div>
                
                <div class="form-group">
                    <label>Nova senha:</label>
                    <input type="password" id="novaSenha" placeholder="MÃ­nimo 6 caracteres">
                    <span class="password-toggle" onclick="togglePassword('novaSenha')">ğŸ‘ï¸</span>
                </div>
                
                <div class="form-group">
                    <label>Confirmar nova senha:</label>
                    <input type="password" id="confirmarNovaSenha" placeholder="Digite novamente">
                    <span class="password-toggle" onclick="togglePassword('confirmarNovaSenha')">ğŸ‘ï¸</span>
                </div>
                
                <button class="btn-login" onclick="definirNovaSenha()">Definir Nova Senha</button>
                
                <div style="margin-top: 20px; text-align: center;">
                    <p><a href="#" onclick="mostrarRecuperacao()" style="color: #0047B6; font-weight: bold;">Voltar para recuperaÃ§Ã£o</a></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Aplicativo Principal -->
    <div id="appPrincipal" class="hidden">
        <!-- Header -->
        <div class="header-app">
            <div>
                <h1>ğŸ“š Planejador de Aulas</h1>
                <p>Bem-vindo, <span id="userCumprimento">Professor</span>!</p>
            </div>
            <div style="display: flex; gap: 10px; align-items: center;">
                <button onclick="abrirEditarPerfil()" class="btn-header btn-perfil">
                    ğŸ‘¤ Perfil
                </button>
                <button onclick="abrirConfiguracaoEscola()" class="btn-header btn-escola">
                    ğŸ« Escolas
                </button>
                <button onclick="abrirConfiguracaoHorario()" class="btn-header">
                    ğŸ• Meu HorÃ¡rio
                </button>
                <button id="btnAdmin" class="btn-header btn-admin hidden" onclick="abrirPainelAdmin()">
                    âš™ï¸ Admin
                </button>
                <button onclick="fazerLogout()" class="btn-header btn-sair">
                    ğŸšª Sair
                </button>
            </div>
        </div>

        <!-- Banner Escola Atual -->
        <div id="bannerEscolaAtual" class="banner-escola hidden">
            <div>
                <strong>Escola atual:</strong> 
                <span id="escolaAtualNome">Nenhuma escola selecionada</span>
            </div>
            <button onclick="abrirConfiguracaoEscola()" class="btn-trocar-escola">
                ğŸ”„ Trocar Escola
            </button>
        </div>

        <!-- ConteÃºdo Principal -->
        <div class="main-content">
            <!-- ConfiguraÃ§Ã£o Inicial -->
            <div id="paginaSemanas">
                <div style="margin: 30px 0;">
                    <div style="display: flex; gap: 20px; align-items: center; flex-wrap: wrap; margin-bottom: 20px;">
                        <div class="input-group" style="flex: 1;">
                            <label>Data de inÃ­cio do ano letivo:</label>
                            <input type="date" id="inicioLetivo" style="padding: 10px;">
                        </div>
                        <button onclick="gerarSemanas()" class="btn btn-primary" style="align-self: flex-end;">
                            ğŸ“… Gerar Semanas
                        </button>
                        <button onclick="exportarParaDOC()" class="btn btn-success" style="align-self: flex-end;">
                            ğŸ“‹ Exportar DOC
                        </button>
                    </div>
                    <div id="statusHorario" class="status-horario vazio">
                        âš ï¸ Configure sua escola e horÃ¡rio primeiro
                    </div>
                </div>

                <!-- Lista de Semanas -->
                <div class="config-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h2>Semanas Letivas</h2>
                        <div style="background: #f8f9fa; padding: 10px 20px; border-radius: 8px;">
                            <div id="contadorSemanas">0 semanas geradas</div>
                        </div>
                    </div>

                    <!-- Filtros -->
                    <div class="periodo-selector">
                        <button class="periodo-btn active" onclick="filtrarSemanas('todas')">Todas</button>
                        <button class="periodo-btn" onclick="filtrarSemanas('vazias')">Vazias</button>
                        <button class="periodo-btn" onclick="filtrarSemanas('parciais')">Parciais</button>
                        <button class="periodo-btn" onclick="filtrarSemanas('completas')">Completas</button>
                        <input type="text" id="filtroSemana" placeholder="Buscar semana..." style="padding: 8px; border: 1px solid #ddd; border-radius: 6px; flex: 1;" 
                               oninput="filtrarSemanasPorBusca()">
                    </div>

                    <!-- Grade de Semanas -->
                    <div id="listaSemanas" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">
                        <!-- As semanas serÃ£o geradas aqui -->
                    </div>
                </div>

                <!-- Ajuda -->
                <div class="help-box">
                    <p><strong>ğŸ’¡ Como usar o sistema:</strong></p>
                    <p>1. Clique em "ğŸ‘¤ Perfil" para editar seus dados pessoais</p>
                    <p>2. Clique em "ğŸ« Escolas" para cadastrar suas escolas (pode ter vÃ¡rias!)</p>
                    <p>3. Selecione uma escola no banner acima para trabalhar nela</p>
                    <p>4. Clique em "ğŸ• Meu HorÃ¡rio" para configurar disciplinas e horÃ¡rios ESPECÃFICOS dessa escola</p>
                    <p>5. Configure a data de inÃ­cio do ano letivo e clique em "Gerar Semanas"</p>
                    <p>6. Clique em uma semana para planejar suas aulas</p>
                    <p>7. Use "Exportar DOC" para salvar seu planejamento em Word com formataÃ§Ã£o otimizada</p>
                    <p><strong>ğŸ“š Disciplinas cadastradas na escola atual:</strong> <span id="disciplinasLista">0 disciplinas</span></p>
                    <p><strong>âš ï¸ Lembre-se:</strong> Cada escola tem suas prÃ³prias disciplinas, turmas e horÃ¡rios!</p>
                </div>
            </div>

            <!-- PÃ¡gina de Aulas -->
            <div id="paginaAulas" class="hidden">
                <div style="margin-bottom: 30px;">
                    <button id="voltar" onclick="voltarParaSemanas()" style="background: none; border: none; color: #0047B6; font-size: 16px; cursor: pointer; padding: 10px 0; margin-bottom: 20px;">
                        â† Voltar para semanas
                    </button>
                    <h2 id="tituloSemana"></h2>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button onclick="exportarSemanaDOC()" class="btn btn-success">
                            ğŸ“„ Exportar Esta Semana
                        </button>
                        <button onclick="apagarTodaSemana()" class="btn btn-danger">
                            ğŸ—‘ï¸ Apagar Toda a Semana
                        </button>
                    </div>
                </div>

                <!-- Grade da Semana -->
                <div id="gradeSemana" class="config-section">
                    <!-- A grade serÃ¡ gerada aqui -->
                </div>
            </div>
        </div>

        <!-- RodapÃ© -->
        <div class="rodape-autor">
            <p>Sistema desenvolvido por <strong>Lafaiete Erkmann</strong> â€¢ Contato: <a href="https://instagram.com/lafa.bio" target="_blank">@lafa.bio</a></p>
            <p style="font-size: 12px; margin-top: 5px;">Planejador de Aulas Â© 2024 - Sistema Completo com Suporte a MÃºltiplas Escolas</p>
            <p style="font-size: 11px; color: #666; margin-top: 5px;">VersÃ£o 2.0 â€¢ Dados completamente separados por escola</p>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>